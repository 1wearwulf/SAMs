"""
API URL configuration for the SAMS application.
"""
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .apps.accounts import views as accounts_views
from .apps.attendance import views as attendance_views
from .apps.courses import views as courses_views
from .apps.notifications import views as notifications_views
from .apps.analytics import views as analytics_views
from .apps.devices import views as devices_views

# Create a router for ViewSets
router = DefaultRouter()

# Register ViewSets
router.register(r'users', accounts_views.UserViewSet, basename='user')
router.register(r'attendance', attendance_views.AttendanceViewSet, basename='attendance')
router.register(r'courses', courses_views.CourseViewSet, basename='course')
router.register(r'sessions', courses_views.ClassSessionViewSet, basename='class-session')
router.register(r'notifications', notifications_views.NotificationViewSet, basename='notification')
router.register(r'devices', devices_views.DeviceViewSet, basename='device')

urlpatterns = [
    path('', include(router.urls)),

    # Authentication endpoints
    path('auth/login/', accounts_views.LoginView.as_view(), name='login'),
    path('auth/logout/', accounts_views.LogoutView.as_view(), name='logout'),
    path('auth/register/', accounts_views.RegisterView.as_view(), name='register'),
    path('auth/password-reset/', accounts_views.PasswordResetView.as_view(), name='password-reset'),
    path('auth/password-reset-confirm/', accounts_views.PasswordResetConfirmView.as_view(), name='password-reset-confirm'),

    # Attendance specific endpoints
    path('attendance/mark/', attendance_views.MarkAttendanceView.as_view(), name='mark-attendance'),
    path('attendance/qr/generate/', attendance_views.GenerateQRView.as_view(), name='generate-qr'),
    path('attendance/qr/validate/', attendance_views.ValidateQRView.as_view(), name='validate-qr'),

    # Analytics endpoints
    path('analytics/dashboard/', analytics_views.DashboardView.as_view(), name='analytics-dashboard'),
    path('analytics/reports/', analytics_views.ReportsView.as_view(), name='analytics-reports'),

    # Notifications endpoints
    path('notifications/send/', notifications_views.SendNotificationView.as_view(), name='send-notification'),
    path('notifications/bulk-send/', notifications_views.BulkNotificationView.as_view(), name='bulk-notification'),
]

# Include app-specific URLs
urlpatterns += [
    path('accounts/', include('api.apps.accounts.urls')),
    path('attendance/', include('api.apps.attendance.urls')),
    path('courses/', include('api.apps.courses.urls')),
    path('notifications/', include('api.apps.notifications.urls')),
    path('analytics/', include('api.apps.analytics.urls')),
    path('devices/', include('api.apps.devices.urls')),
]
