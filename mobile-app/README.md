# SAMS Mobile App

Smart Attendance Management System - Flutter Mobile Application

## Overview

The SAMS mobile app allows students to easily mark their attendance by scanning QR codes generated by lecturers. The app features geofencing, device fingerprinting, and real-time notifications to ensure secure and accurate attendance tracking.

## Features

### Core Features
- **QR Code Scanning**: Scan QR codes to mark attendance instantly
- **Geofencing**: Location verification to prevent proxy attendance
- **Device Security**: Device fingerprinting and validation
- **Real-time Notifications**: Push notifications for announcements and reminders
- **Offline Support**: Basic functionality works without internet
- **Multi-platform**: Supports both Android and iOS

### User Features
- **Student Dashboard**: View attendance history and statistics
- **Course Management**: View enrolled courses and schedules
- **Profile Management**: Update personal information
- **Notification Center**: Manage notifications and preferences
- **Attendance History**: Detailed attendance records with timestamps

## Technical Stack

- **Framework**: Flutter 3.0+
- **Language**: Dart
- **State Management**: Provider
- **Networking**: HTTP with Dio
- **Local Storage**: SharedPreferences
- **Push Notifications**: Firebase Cloud Messaging (FCM)
- **QR Scanning**: qr_code_scanner
- **Location Services**: geolocator
- **Device Info**: device_info_plus

## Prerequisites

### System Requirements
- Flutter SDK 3.0.0 or higher
- Dart SDK 2.19.0 or higher
- Android Studio (for Android development)
- Xcode 14+ (for iOS development)

### Development Setup

1. **Install Flutter**
   ```bash
   # Download and install Flutter SDK from https://flutter.dev
   # Add Flutter to your PATH
   ```

2. **Verify Installation**
   ```bash
   flutter doctor
   ```

3. **Clone and Setup**
   ```bash
   cd sams-project/mobile-app
   flutter pub get
   ```

## Configuration

### API Configuration
Update the API base URL in `lib/core/constants.dart`:
```dart
static const String baseUrl = 'http://your-api-server.com/api'; // Production
// static const String baseUrl = 'http://10.0.2.2:8000/api'; // Android emulator
// static const String baseUrl = 'http://localhost:8000/api'; // iOS simulator
```

### Firebase Setup

1. **Create Firebase Project**
   - Go to [Firebase Console](https://console.firebase.google.com/)
   - Create a new project or select existing one

2. **Add Android App**
   - Package name: `com.sams.attendance`
   - Download `google-services.json`
   - Place in `android/app/`

3. **Add iOS App**
   - Bundle ID: `com.sams.attendance`
   - Download `GoogleService-Info.plist`
   - Place in `ios/Runner/`

4. **Enable Services**
   - Authentication
   - Cloud Messaging (FCM)
   - Realtime Database (optional)

### Permissions

#### Android Permissions
Add to `android/app/src/main/AndroidManifest.xml`:
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
```

#### iOS Permissions
Already configured in `ios/Runner/Info.plist`

## Building and Running

### Development
```bash
# Run on connected device/emulator
flutter run

# Run on specific platform
flutter run -d android
flutter run -d ios

# Run with specific flavor
flutter run --flavor development
```

### Building APKs
```bash
# Debug APK
flutter build apk

# Release APK
flutter build apk --release

# App Bundle (recommended for Play Store)
flutter build appbundle --release
```

### Building iOS
```bash
# Debug
flutter build ios

# Release
flutter build ios --release
```

## Project Structure

```
lib/
├── core/                 # Core utilities and constants
│   ├── constants.dart    # App constants and configuration
│   ├── routes.dart       # App routing configuration
│   └── theme.dart        # App theming
├── models/               # Data models
│   ├── user.dart         # User model
│   ├── course.dart       # Course model
│   ├── attendance.dart   # Attendance model
│   └── notification.dart # Notification model
├── services/             # Business logic and API calls
│   ├── api_service.dart  # HTTP client and API utilities
│   ├── auth_service.dart # Authentication service
│   ├── attendance_service.dart # Attendance operations
│   └── notification_service.dart # Notification handling
├── providers/            # State management
│   ├── auth_provider.dart     # Authentication state
│   ├── attendance_provider.dart # Attendance state
│   └── course_provider.dart   # Course state
├── ui/                   # UI components and screens
│   ├── screens/          # App screens
│   │   ├── splash_screen.dart
│   │   ├── login_screen.dart
│   │   ├── home_screen.dart
│   │   ├── scan_qr_screen.dart
│   │   └── ...
│   └── widgets/          # Reusable widgets
│       ├── custom_button.dart
│       ├── custom_text_field.dart
│       └── ...
└── main.dart             # App entry point
```

## Testing

### Unit Tests
```bash
flutter test
```

### Integration Tests
```bash
flutter test integration_test/
```

### Widget Tests
```bash
flutter test test/widget_test.dart
```

## Deployment

### Android (Google Play Store)
1. Build release APK/AAB
2. Create Play Store listing
3. Upload and publish

### iOS (App Store)
1. Build release IPA
2. Create App Store Connect record
3. Upload via Xcode or Transporter
4. Submit for review

## Troubleshooting

### Common Issues

**Camera not working**
- Ensure camera permissions are granted
- Check if camera is being used by another app

**Location services not working**
- Enable location services in device settings
- Grant location permissions to the app

**Push notifications not working**
- Verify Firebase configuration
- Check device token registration
- Ensure FCM server key is configured in backend

**API connection issues**
- Verify API base URL configuration
- Check network connectivity
- Ensure backend server is running

### Debug Commands
```bash
# Check device connectivity
flutter devices

# Clean and rebuild
flutter clean
flutter pub get

# Analyze code
flutter analyze

# Format code
flutter format lib/
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make changes and test thoroughly
4. Submit a pull request

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Support

For support and questions:
- Create an issue in the repository
- Contact the development team
- Check the documentation

---

**Note**: This app requires a running instance of the SAMS backend API server. Make sure the backend is properly configured and running before using the mobile app.
